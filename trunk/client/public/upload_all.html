<html>
<head>
	<script type="text/javascript" src="ext-base.js"></script>
	<script type="text/javascript" src="ext-all.js"></script>
	<script type="text/javascript">
		function process_upload(el, success, response, options) {
			el.update(response.responseText);
		
			if (response.responseText != 'Upload Complete.') {
				el.load({
					url: 'upload_all',
					method: 'POST',
					callback: process_upload,
				});
			} 
		}

		Ext.onReady(function() {
			var upload_progress = Ext.get('upload_progress');
			upload_progress.getUpdater().showLoadIndicator = false;

			upload_progress.load({
				url: 'upload_all',
				method: 'POST',
				callback: process_upload,
			});
			upload_progress.show();
		});
	</script>
</head>
<body onload="">
	<div id="upload_progress">Upload starting...</div>
</body>
</html>
